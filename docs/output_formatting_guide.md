# FinWiz Output Formatting Guide

This document establishes the definitive standards for all data and report outputs generated by FinWiz agents. All agents must adhere to these guidelines to ensure consistent, high-quality, and machine-readable results.

## General Principles

Each task requiring a report must produce **TWO COMPLETELY SEPARATE OUTPUTS**:

1. **HTML Output**: A human-readable, visually appealing report.
2. **JSON Output**: A machine-readable data file for downstream processing.

### ⚠️ Critical Warnings

* **DO NOT** include raw JSON in your HTML output or task result.
* **DO NOT** return raw API responses as your task result.
* **DO NOT** return both HTML and JSON together in a single output.
* **ALWAYS** return ONLY the result of the `HTMLOutputTool` as your final task result.
* **NEVER** mix HTML and JSON formats.

## HTML Report Standards

### HTML Structure & Formatting

* Use proper HTML5 document structure (`<!DOCTYPE html>`).
* Use UTF-8 encoding (`<meta charset="UTF-8">`) for emoji support.
* Structure content with appropriate heading levels (h1-h6) and semantic elements (sections, tables, lists).
* Include a clear title and publication date.
* Use tables for comparative data and lists for sequential information.
* Use emphasis (bold/italic) for important points.

### HTML Content Requirements

* Present information in logical sections with clear headings.
* Include data sources and methodology where applicable.
* Provide actionable conclusions and recommendations.
* Include real, verifiable ticker symbols for all financial instruments.

### HTML Prohibited Elements

* No raw JSON data, API responses, or debugging information.
* No placeholder text or TODOs.
* No unclosed or malformed HTML tags.

### Emoji Usage Guidelines

Use emojis strategically to highlight key points:

* 📈 Growth trends, positive performance
* 📉 Decline trends, negative performance
* 🔍 Analysis insights, detailed examination
* 🌐 Global factors, market-wide considerations
* 🚀 High-growth potential, emerging opportunities
* ⚠️ Risk indicators, warnings
* 💰 Financial metrics, monetary values
* ⏱️ Time horizons, temporal considerations
* 📊 Data visualization, statistics
* 🛡️ Defensive strategies, capital preservation
* 👨‍💼 Management quality, governance
* 💡 Innovation, competitive advantage

## JSON Data Standards

### JSON Structure & Formatting

* Must be valid JSON with proper nesting and data types.
* Use a consistent naming convention (e.g., `snake_case`).
* Include a metadata section with report type and generation date.
* Use ISO date format (`YYYY-MM-DD`).

### JSON Content Requirements

* Include all key data points from the HTML report.
* Standardize units and formats for numerical data.
* Include real, verifiable ticker symbols for all financial instruments.

### JSON Prohibited Elements

* No HTML tags or formatting.
* No emojis or decorative characters.
* No narrative paragraphs (break into structured data).

## Implementation Example & Quality Checklist

### ✅ Best-Practice Implementation

Always generate the JSON file first, then create and return the HTML report.

```python
# 1. Create and save the JSON file (for machine reading)
JSONOutputTool()._run(
    output_path="report/example_report.json",
    data={
        "analysis_date": "2025-06-11",
        "recommendations": [...]
    }
)

# 2. Create and return ONLY the HTML report (for human reading)
html_content = """
<h1>Stock Investment Recommendations</h1>
<p>Date: June 11, 2025</p>
<section>
    <h2>🏆 Top Pick: Amazon (AMZN)</h2>
    <p>Current Price: $207.23</p>
    <p>Action: Buy</p>
    ...
</section>
"""

result = HTMLOutputTool()._run(
    output_path="report/example_report.html",
    title="Stock Investment Recommendations",
    content=html_content
)

return result  # Return ONLY this result
```

### Quality Checklist

**HTML Quality:**

1. Validate HTML structure and encoding.
2. Confirm all sections are present and properly formatted.
3. Verify ticker symbols are real and correct.
4. Confirm no raw JSON or API data is present.
5. Ensure content is readable, actionable, and valuable.

**JSON Quality:**

1. Validate JSON syntax and structure.
2. Confirm all required data fields are present.
3. Verify no HTML or emojis are present.
4. Check data consistency with the HTML report.
5. Validate ticker symbols and classifications.
