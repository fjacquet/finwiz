market_etf_analysis_task:
  description: >
    Conduct a comprehensive market and technical analysis to identify the top 10 high-potential
    ETFs for investment. Focus on:
    1. Market Analysis:
       a. Current market trends and emerging sectors with strong growth potential
       b. Macro-economic factors influencing ETF performance
       c. Analysis of sector rotation and thematic opportunities
       d. Regional and global market dynamics affecting ETF returns
       e. Historical performance patterns that indicate future growth potential
    2. ETF Structure Evaluation:
       a. ETF structure, holdings, and weighting methodology
       b. Expense ratio and cost efficiency compared to peers
       c. Tracking error and index replication quality
       d. Liquidity and trading volume analysis
       e. Fund issuer reputation and fund management quality
    Today is {full_date}, it's day {current_day} of month {current_month} in year {current_year}.
    Ensure your analysis reflects the latest market conditions as of {timestamp}.
    IMPORTANT: Use only real, existing ETFs with accurate ticker symbols. 
    Do not use illustrative or hypothetical examples.
  expected_output: >
    A comprehensive HTML with emojis report identifying and evaluating the top 10 promising ETF investment opportunities,
    including both market analysis and technical evaluation for each ETF.
    Each ETF must include its actual ticker symbol and verifiable performance data.
    Use emojis to highlight key points:
    📈 Growth trends
    🔍 Market opportunities
    🌐 Global factors
    🚀 High-potential ETFs
    📊 Performance metrics
    ⚙️ ETF structure
    💰 Expense ratio
    📊 Tracking accuracy
    💧 Liquidity profile
    👨‍💼 Fund management
    Include today's date ({full_date}) in your report.
  agent: market_etf_analyst
  output_file: "report/etf_market_technical_analysis.html"

investment_risk_strategy_task:
  description: >
    Evaluate risks and develop investment strategies for each of the 10 ETFs. Focus on:
    1. Risk Assessment:
       a. Volatility metrics and historical drawdowns
       b. Concentration risks within the ETF holdings
       c. Liquidity risks during market stress scenarios
       d. Counterparty and structural risks
       e. Regulatory and tax considerations
    2. Investment Strategy:
       a. Optimal entry price points and target valuation
       b. Position sizing recommendations based on risk/reward profile
       c. Time horizon for expected returns
       d. Portfolio allocation strategy and diversification considerations
       e. Risk management tactics specific to each ETF
    Consider all factors known as of {timestamp} and use {current_year} regulatory standards.
    Base your investment recommendations on current market conditions as of {full_date}.
    IMPORTANT: Use accurate metrics based on real historical data and provide specific, actionable
    recommendations for real ETFs with their actual ticker symbols.
    Do not use hypothetical scenarios or add "(Illustrative)" disclaimers.
  expected_output: >
    A comprehensive HTML with emojis risk assessment and investment strategy report for each ETF,
    including risk ratings, investment recommendations, specific price targets, position sizing,
    time horizons, and expected return calculations. All assessments and recommendations
    must be based on verifiable data for real ETFs with their actual ticker symbols.
    Use emojis to categorize information:
    📉 Volatility risk
    🧮 Concentration risk
    💧 Liquidity risk
    ⚖️ Regulatory concerns
    ⚠️ Overall risk rating
    💲 Entry points
    📊 Position sizing
    ⏱️ Time horizon
    📈 Target returns
    🔄 Portfolio allocation
    Include today's date ({full_date}) in your report.
  agent: investment_risk_analyst
  output_file: "report/etf_investment_risk_strategy.html"

research_synthesis_task:
  description: >
    Review all analyses and synthesize the findings into a focused investment thesis for the 10 ETFs.
    Ensure that:
    1. Key findings from all analyses are incorporated concisely
    2. ETFs are clearly ranked by investment potential
    3. Specific investment rationales and expected returns are provided
    4. A brief timeline for investment and monitoring is included
    This report should be current as of {timestamp} and provide guidance for the {current_year}-{current_year+1} investment horizon.
    
    IMPORTANT REQUIREMENTS:
    1. Present only real ETFs with their actual ticker symbols. No hypothetical examples
       or "(Illustrative)" disclaimers.
    2. Generate TWO COMPLETELY SEPARATE outputs:
       a. A human-readable HTML report (for display) to be returned as your task result
       b. A structured JSON file that is ONLY created using the JSONOutputTool
    
    CRITICAL INSTRUCTIONS FOR OUTPUT SEPARATION:
    1. For the JSON output:
       - Use the JSONOutputTool to create and save the JSON file
       - Set output_path to: "report/etf_unicorn_investment_recommendations.json"
       - Do NOT include the JSON content in your HTML output or task result
       - After saving the JSON file, only mention that you've saved it
    
    2. JSON structure should include:
    {
      "crew_type": "etf",
      "analysis_date": "{full_date}",
      "recommendations": [
        {
          "ticker": "[SYMBOL]",
          "name": "[ETF NAME]",
          "action": "buy|sell|hold",
          "price": [CURRENT_PRICE],
          "currency": "CHF",
          "allocation": [RECOMMENDED_ALLOCATION],
          "rationale": "[INVESTMENT_RATIONALE]",
          "risk_level": "low|medium|high",
          "expected_return": "[PERCENTAGE]",
          "timeframe": "[TIME_PERIOD]"
        }
      ],
      "tickers_analyzed": ["[SYMBOL1]", "[SYMBOL2]", ...]
    }
  expected_output: >
    TWO outputs are required:
    
    1. HTML OUTPUT (RETURN THIS AS TASK RESULT): A comprehensive HTML with emojis investment thesis document that presents the top ETF investment opportunities, with detailed reasoning, investment guidelines, and expected outcomes. All recommendations must be for real ETFs with their actual ticker symbols and verifiable data. The document should be actionable and provide clear guidance for winning in the ETF market. Use emojis for better visualization:
    🏆 Top ranked ETFs
    💸 Expected ROI
    📊 Investment allocation
    📍 Action steps
    📈 Monitoring metrics
    ⏱️ Investment timeline
    🔮 Future outlook
    Include today's date ({full_date}) prominently in your report.
    
    2. JSON OUTPUT (SAVE USING JSONOutputTool): A structured JSON file containing all recommendations in a machine-readable format, including ticker symbols, ETF names, current prices, recommended allocations, rationales, risk levels, expected returns, and timeframes. This will be used by the Report Crew for portfolio integration.
    IMPORTANT: Do NOT include this JSON in your task result - use the JSONOutputTool to save it separately.
  agent: research_director
  output_file: "report/etf_unicorn_investment_recommendations.html"
  # Note: json_output_file is not used directly by CrewAI. Use JSONOutputTool with the correct output_path instead.
